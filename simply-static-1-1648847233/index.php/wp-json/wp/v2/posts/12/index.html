{"id":12,"date":"2022-03-11T01:21:16","date_gmt":"2022-03-11T01:21:16","guid":{"rendered":"http:\/\/localhost\/?p=12"},"modified":"2022-03-14T21:07:26","modified_gmt":"2022-03-15T00:07:26","slug":"redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados","status":"publish","type":"post","link":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/","title":{"rendered":"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados"},"content":{"rendered":"\n<p><\/p>\n\n\n\n<p>O cen\u00e1rio \u00e9 o seguinte:<\/p>\n\n\n\n<ul><li>Servidor Debian Buster com Kernel 4.19.194-2 virtualizado em VirtualBox<\/li><li>Disco virtual de 50GB precisa ser aumentado para 100GB<\/li><li>Parti\u00e7\u00e3o \u00fanica em LVM no segundo disco (\/dev\/sdb)<\/li><\/ul>\n\n\n\n<p><\/p>\n\n\n\n<h1>..::|&nbsp;<strong>Redimensionando<\/strong><\/h1>\n\n\n\n<p>Ap\u00f3s aumentar o disco virtual no VirtualBox com o servidor Debian desligado, inicie-o e verifique se o novo tamanho foi reconhecido:<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"502\" height=\"179\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-fdisk-sdb.png\" alt=\"\" class=\"wp-image-16\"\/><\/figure>\n\n\n\n<p>Caso o disco esteja montado, lembre-se de desmonta-lo:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo umount \/dev\/sdb1<\/code><\/pre>\n\n\n\n<p>Verifique as informa\u00e7\u00f5es do volume l\u00f3gico para pegar o nome dele. Execute \u201c<em>sudo lvscan<\/em>\u201c:<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"470\" height=\"35\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-lvscan-edit-1.png\" alt=\"\" class=\"wp-image-17\"\/><\/figure>\n\n\n\n<p>Desative o volume l\u00f3gico:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo lvchange -a n \/dev\/test\/lvol0<\/code><\/pre>\n\n\n\n<p>Caso j\u00e1 n\u00e3o o tenha, instale o \u201c<em>parted<\/em>\u201d para redimensionar a parti\u00e7\u00e3o LVM:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo apt-get install parted<\/code><\/pre>\n\n\n\n<p>Inicialize o&nbsp;<em>parted<\/em>&nbsp;no disco a ser redimensionado:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo parted \/dev\/sdb<\/code><\/pre>\n\n\n\n<p>No ambiente do&nbsp;<em>parted<\/em>, verifique a capacidade total do disco com o comando \u201c<em>print<\/em>\u201d afim de saber para qual tamanho pode-se aumentar a parti\u00e7\u00e3o \/dev\/sdb1 com o comando \u201c<em>resizepart<\/em>\u201c:<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"543\" height=\"497\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-parted-edit-1.png\" alt=\"\" class=\"wp-image-18\"\/><\/figure>\n\n\n\n<p>Insira as informa\u00e7\u00f5es mostradas pelo comando \u201c<em>print<\/em>\u201d nas duas perguntas que o comando \u201c<em>resizepart<\/em>\u201d faz, conforme os destaques em vermelho na imagem acima.<\/p>\n\n\n\n<p>Agora aumente o physical volume dessa parti\u00e7\u00e3o com o comando \u201c<em>sudo pvresize \/dev\/sdb1<\/em>\u201c.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"612\" height=\"50\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-pvresize-sdb1png.png\" alt=\"\" class=\"wp-image-20\"\/><figcaption><em>Com o comando \u201csudo pvs\u201d voc\u00ea pode confirmar se o tamanho do physical volume foi aumentado com sucesso.<\/em><\/figcaption><\/figure>\n\n\n\n<p>Redimensione o volume l\u00f3gico para o m\u00e1ximo dispon\u00edvel:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo lvextend -l +100%FREE \/dev\/test\/lvol0<\/code><\/pre>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"801\" height=\"65\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-lvextend-edit.png\" alt=\"\" class=\"wp-image-21\"\/><\/figure>\n\n\n\n<p>Ative novamente o volume l\u00f3gico com o comando:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo lvchange -a y \/dev\/test\/lvol0<\/code><\/pre>\n\n\n\n<p>Fa\u00e7a uma checagem da parti\u00e7\u00e3o antes de redimension\u00e1-la (\u00e9 necess\u00e1rio):<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"637\" height=\"130\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-e2fsck.png\" alt=\"\" class=\"wp-image-22\"\/><\/figure>\n\n\n\n<p>Execute o&nbsp;<em>resize2fs<\/em>&nbsp;nessa parti\u00e7\u00e3o para que o novo tamanho seja reconhecido:<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"549\" height=\"72\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-resize2fs.png\" alt=\"\" class=\"wp-image-23\"\/><\/figure>\n\n\n\n<p>Pronto!<\/p>\n\n\n\n<p>Agora basta montar a parti\u00e7\u00e3o com o comando&nbsp;<em>mount<\/em>.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>test@debian:~$ sudo mount \/dev\/test\/lvol0 \/destino_da_montagem<\/code><\/pre>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"496\" height=\"177\" src=\"http:\/\/localhost\/wp-content\/uploads\/2022\/03\/1-mount.png\" alt=\"\" class=\"wp-image-24\"\/><\/figure>\n\n\n\n<p>Caso o redimensionamento seja em um disco onde esteja rodando a raiz do sistema, basta usar um live-cd e seguir esses mesmos passos.<\/p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p><strong>Fontes:<\/strong><br><a href=\"https:\/\/www.tecmint.com\/parted-command-to-create-resize-rescue-linux-disk-partitions\/\">https:\/\/www.tecmint.com\/parted-command-to-create-resize-rescue-linux-disk-partitions\/<\/a><br><a href=\"https:\/\/wiki.debian.org\/LVM\" target=\"_blank\" rel=\"noreferrer noopener\">https:\/\/wiki.debian.org\/LVM<\/a><\/p><\/blockquote>\n\n\n\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.<\/p>\n","protected":false},"author":1,"featured_media":14,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v18.3 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados - Marcius Costa<\/title>\n<meta name=\"description\" content=\"Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/\" \/>\n<meta property=\"og:locale\" content=\"pt_BR\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados\" \/>\n<meta property=\"og:description\" content=\"Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.\" \/>\n<meta property=\"og:url\" content=\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/\" \/>\n<meta property=\"og:site_name\" content=\"Marcius Costa\" \/>\n<meta property=\"article:published_time\" content=\"2022-03-11T01:21:16+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-03-15T00:07:26+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/10.0.0.181\/wp-content\/uploads\/2022\/03\/1-titulo-1.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1200\" \/>\n\t<meta property=\"og:image:height\" content=\"675\" \/>\n\t<meta property=\"og:image:type\" content=\"image\/png\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:label1\" content=\"Escrito por\" \/>\n\t<meta name=\"twitter:data1\" content=\"marcius\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. tempo de leitura\" \/>\n\t<meta name=\"twitter:data2\" content=\"4 minutos\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebSite\",\"@id\":\"http:\/\/10.0.0.181\/#website\",\"url\":\"http:\/\/10.0.0.181\/\",\"name\":\"Marcius Costa\",\"description\":\"Profissional em redes de computadores e seguran\u00e7a cibern\u00e9tica\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"http:\/\/10.0.0.181\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"pt-BR\"},{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#primaryimage\",\"inLanguage\":\"pt-BR\",\"url\":\"http:\/\/10.0.0.181\/wp-content\/uploads\/2022\/03\/1-titulo-1.png\",\"contentUrl\":\"http:\/\/10.0.0.181\/wp-content\/uploads\/2022\/03\/1-titulo-1.png\",\"width\":1200,\"height\":675},{\"@type\":\"WebPage\",\"@id\":\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#webpage\",\"url\":\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/\",\"name\":\"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados - Marcius Costa\",\"isPartOf\":{\"@id\":\"http:\/\/10.0.0.181\/#website\"},\"primaryImageOfPage\":{\"@id\":\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#primaryimage\"},\"datePublished\":\"2022-03-11T01:21:16+00:00\",\"dateModified\":\"2022-03-15T00:07:26+00:00\",\"author\":{\"@id\":\"http:\/\/10.0.0.181\/#\/schema\/person\/06a29c6c112f692c476fb671fa556a4a\"},\"description\":\"Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.\",\"breadcrumb\":{\"@id\":\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#breadcrumb\"},\"inLanguage\":\"pt-BR\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"In\u00edcio\",\"item\":\"http:\/\/10.0.0.181\/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados\"}]},{\"@type\":\"Person\",\"@id\":\"http:\/\/10.0.0.181\/#\/schema\/person\/06a29c6c112f692c476fb671fa556a4a\",\"name\":\"marcius\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"http:\/\/10.0.0.181\/#personlogo\",\"inLanguage\":\"pt-BR\",\"url\":\"http:\/\/0.gravatar.com\/avatar\/c913a61ab6c4834155e669573c13b12c?s=96&d=mm&r=g\",\"contentUrl\":\"http:\/\/0.gravatar.com\/avatar\/c913a61ab6c4834155e669573c13b12c?s=96&d=mm&r=g\",\"caption\":\"marcius\"},\"sameAs\":[\"http:\/\/localhost\"],\"url\":\"http:\/\/10.0.0.181\/index.php\/author\/marcius\/\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados - Marcius Costa","description":"Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/","og_locale":"pt_BR","og_type":"article","og_title":"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados","og_description":"Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.","og_url":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/","og_site_name":"Marcius Costa","article_published_time":"2022-03-11T01:21:16+00:00","article_modified_time":"2022-03-15T00:07:26+00:00","og_image":[{"width":1200,"height":675,"url":"http:\/\/10.0.0.181\/wp-content\/uploads\/2022\/03\/1-titulo-1.png","type":"image\/png"}],"twitter_card":"summary_large_image","twitter_misc":{"Escrito por":"marcius","Est. tempo de leitura":"4 minutos"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebSite","@id":"http:\/\/10.0.0.181\/#website","url":"http:\/\/10.0.0.181\/","name":"Marcius Costa","description":"Profissional em redes de computadores e seguran\u00e7a cibern\u00e9tica","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"http:\/\/10.0.0.181\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"pt-BR"},{"@type":"ImageObject","@id":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#primaryimage","inLanguage":"pt-BR","url":"http:\/\/10.0.0.181\/wp-content\/uploads\/2022\/03\/1-titulo-1.png","contentUrl":"http:\/\/10.0.0.181\/wp-content\/uploads\/2022\/03\/1-titulo-1.png","width":1200,"height":675},{"@type":"WebPage","@id":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#webpage","url":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/","name":"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados - Marcius Costa","isPartOf":{"@id":"http:\/\/10.0.0.181\/#website"},"primaryImageOfPage":{"@id":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#primaryimage"},"datePublished":"2022-03-11T01:21:16+00:00","dateModified":"2022-03-15T00:07:26+00:00","author":{"@id":"http:\/\/10.0.0.181\/#\/schema\/person\/06a29c6c112f692c476fb671fa556a4a"},"description":"Nesse artigo, explico como aumentar uma parti\u00e7\u00e3o LVM de um disco virtual redimensionado sem ter que refazer a parti\u00e7\u00e3o, ou seja, sem perda de dados.","breadcrumb":{"@id":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#breadcrumb"},"inLanguage":"pt-BR","potentialAction":[{"@type":"ReadAction","target":["http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/"]}]},{"@type":"BreadcrumbList","@id":"http:\/\/10.0.0.181\/index.php\/2022\/03\/11\/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"In\u00edcio","item":"http:\/\/10.0.0.181\/"},{"@type":"ListItem","position":2,"name":"Redimensionando disco virtual no Debian com parti\u00e7\u00e3o LVM sem perda de dados"}]},{"@type":"Person","@id":"http:\/\/10.0.0.181\/#\/schema\/person\/06a29c6c112f692c476fb671fa556a4a","name":"marcius","image":{"@type":"ImageObject","@id":"http:\/\/10.0.0.181\/#personlogo","inLanguage":"pt-BR","url":"http:\/\/0.gravatar.com\/avatar\/c913a61ab6c4834155e669573c13b12c?s=96&d=mm&r=g","contentUrl":"http:\/\/0.gravatar.com\/avatar\/c913a61ab6c4834155e669573c13b12c?s=96&d=mm&r=g","caption":"marcius"},"sameAs":["http:\/\/localhost"],"url":"http:\/\/10.0.0.181\/index.php\/author\/marcius\/"}]}},"_links":{"self":[{"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/posts\/12"}],"collection":[{"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/comments?post=12"}],"version-history":[{"count":4,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/posts\/12\/revisions"}],"predecessor-version":[{"id":104,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/posts\/12\/revisions\/104"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/media\/14"}],"wp:attachment":[{"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/media?parent=12"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/categories?post=12"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/10.0.0.181\/index.php\/wp-json\/wp\/v2\/tags?post=12"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}