<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Linux &#8211; M</title>
	<atom:link href="https://marcius.pro/category/linux/feed" rel="self" type="application/rss+xml" />
	<link>https://marcius.pro/</link>
	<description></description>
	<lastBuildDate>Sat, 24 Jul 2021 03:18:52 +0000</lastBuildDate>
	<language>pt-BR</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.8</generator>
	<item>
		<title>Redimensionando disco virtual no Debian com partição LVM sem perda de dados</title>
		<link>https://marcius.pro/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados.html</link>
					<comments>https://marcius.pro/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados.html#respond</comments>
		
		<dc:creator><![CDATA[wppuma]]></dc:creator>
		<pubDate>Fri, 23 Jul 2021 18:40:26 +0000</pubDate>
				<category><![CDATA[Linux]]></category>
		<guid isPermaLink="false">https://marcius.pro/?p=6</guid>

					<description><![CDATA[O cenário é o seguinte: Servidor Debian Buster com Kernel 4.19.194-2 virtualizado em VirtualBox Disco virtual de 50GB precisa ser aumentado para 100GB Partição única em LVM no segundo disco (/dev/sdb)   ..::&#124; Redimensionando]]></description>
										<content:encoded><![CDATA[
<p>O cenário é o seguinte:</p>



<ul>
<li>Servidor Debian Buster com Kernel 4.19.194-2 virtualizado em VirtualBox</li>
<li>Disco virtual de 50GB precisa ser aumentado para 100GB</li>
<li>Partição única em LVM no segundo disco (/dev/sdb)</li>
</ul>



<p class="has-medium-font-size"> </p>



<h1 class="has-text-align-left">..::| <strong>Redimensionando</strong></h1>



<p>Após aumentar o disco virtual no VirtualBox com o servidor Debian desligado, inicie-o e verifique se o novo tamanho foi reconhecido:</p>
<p><img loading="lazy" class="alignnone wp-image-10 size-full" src="https://marcius.pro/wp-content/uploads/2021/07/1-fdisk-sdb.png" alt="" width="502" height="179" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-fdisk-sdb.png 502w, https://marcius.pro/wp-content/uploads/2021/07/1-fdisk-sdb-300x107.png 300w" sizes="(max-width: 502px) 100vw, 502px" /></p>
<p></p>
<p>Caso o disco esteja montado, lembre-se de desmonta-lo:</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo umount /dev/sdb1</code></pre>
<p>

</p>
<p>Verifique as informações do volume lógico para pegar o nome dele. Execute &#8220;<em>sudo lvscan</em>&#8220;:</p>
<p><img loading="lazy" class="alignnone wp-image-13 size-full" src="https://marcius.pro/wp-content/uploads/2021/07/1-lvscan-edit.png" alt="" width="470" height="35" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-lvscan-edit.png 470w, https://marcius.pro/wp-content/uploads/2021/07/1-lvscan-edit-300x22.png 300w" sizes="(max-width: 470px) 100vw, 470px" /></p>
<p></p>
<p>Desative o volume lógico:</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo lvchange -a n /dev/test/lvol0</code></pre>
<p>

</p>
<p>Caso já não o tenha, instale o &#8220;<em>parted</em>&#8221; para redimensionar a partição LVM:</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo apt-get install parted</code></pre>
<p>

</p>
<p>Inicialize o <em>parted</em> no disco a ser redimensionado:</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo parted /dev/sdb</code></pre>
<p>

</p>
<p>No ambiente do <em>parted</em>, verifique a capacidade total do disco com o comando &#8220;<em>print</em>&#8221; afim de saber para qual tamanho pode-se aumentar a partição /dev/sdb1 com o comando &#8220;<em>resizepart</em>&#8220;:</p>
<p></p>
<p><img loading="lazy" class="alignnone size-full wp-image-14" src="https://marcius.pro/wp-content/uploads/2021/07/1-parted-edit.png" alt="" width="543" height="497" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-parted-edit.png 543w, https://marcius.pro/wp-content/uploads/2021/07/1-parted-edit-300x275.png 300w" sizes="(max-width: 543px) 100vw, 543px" /></p>
<p></p>
<p>Insira as informações mostradas pelo comando &#8220;<em>print</em>&#8221; nas duas perguntas que o comando &#8220;<em>resizepart</em>&#8221; faz, conforme os destaques em vermelho na imagem acima.</p>
<p>

</p>
<p>Agora aumente o physical volume dessa partição com o comando &#8220;<em>sudo pvresize /dev/sdb1</em>&#8220;.</p>
<p></p>
<figure id="attachment_15" aria-describedby="caption-attachment-15" style="width: 612px" class="wp-caption alignnone"><img loading="lazy" class="wp-image-15 size-full" src="https://marcius.pro/wp-content/uploads/2021/07/1-pvresize-sdb1png.png" alt="" width="612" height="50" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-pvresize-sdb1png.png 612w, https://marcius.pro/wp-content/uploads/2021/07/1-pvresize-sdb1png-300x25.png 300w" sizes="(max-width: 612px) 100vw, 612px" /><figcaption id="caption-attachment-15" class="wp-caption-text">Com o comando &#8220;sudo pvs&#8221; você pode confirmar se o tamanho do physical volume foi aumentado com sucesso.</figcaption></figure>
<p></p>
<p>Redimensione o volume lógico para o máximo disponível:</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo lvextend -l +100%FREE /dev/test/lvol0</code></pre>
<p></p>
<p><img loading="lazy" class="alignnone size-full wp-image-16" src="https://marcius.pro/wp-content/uploads/2021/07/1-lvextend-edit.png" alt="" width="801" height="65" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-lvextend-edit.png 801w, https://marcius.pro/wp-content/uploads/2021/07/1-lvextend-edit-300x24.png 300w, https://marcius.pro/wp-content/uploads/2021/07/1-lvextend-edit-768x62.png 768w" sizes="(max-width: 801px) 100vw, 801px" /></p>
<p></p>
<p>Ative novamente o volume lógico com o comando:</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo lvchange -a y /dev/test/lvol0</code></pre>
<p>

</p>
<p>Faça uma checagem da partição antes de redimensioná-la (é necessário):</p>
<p></p>
<p><img loading="lazy" class="alignnone size-full wp-image-17" src="https://marcius.pro/wp-content/uploads/2021/07/1-e2fsck.png" alt="" width="637" height="130" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-e2fsck.png 637w, https://marcius.pro/wp-content/uploads/2021/07/1-e2fsck-300x61.png 300w" sizes="(max-width: 637px) 100vw, 637px" /></p>
<p>Execute o <em>resize2fs</em> nessa partição para que o novo tamanho seja reconhecido:</p>
<p><img loading="lazy" class="alignnone size-full wp-image-18" src="https://marcius.pro/wp-content/uploads/2021/07/1-resize2fs.png" alt="" width="549" height="72" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-resize2fs.png 549w, https://marcius.pro/wp-content/uploads/2021/07/1-resize2fs-300x39.png 300w" sizes="(max-width: 549px) 100vw, 549px" /></p>
<p></p>
<p>Pronto!</p>
<p>

</p>
<p>Agora basta montar a partição com o comando <em>mount</em>.</p>
<p>

</p>
<pre class="wp-block-code"><code>test@debian:~$ sudo mount /dev/test/lvol0 /destino_da_montagem</code></pre>
<p></p>
<p><img loading="lazy" class="alignnone size-full wp-image-19" src="https://marcius.pro/wp-content/uploads/2021/07/1-mount.png" alt="" width="496" height="177" srcset="https://marcius.pro/wp-content/uploads/2021/07/1-mount.png 496w, https://marcius.pro/wp-content/uploads/2021/07/1-mount-300x107.png 300w" sizes="(max-width: 496px) 100vw, 496px" /></p>
<p></p>
<p>Caso o redimensionamento seja em um disco onde esteja rodando a raiz do sistema, basta usar um live-cd e seguir esses mesmos passos.</p>
<p>

</p>
<p>&nbsp;</p>
<p>

</p>
<blockquote class="wp-block-quote">
<p><strong>Fontes:</strong><br /><a href="https://www.tecmint.com/parted-command-to-create-resize-rescue-linux-disk-partitions/">https://www.tecmint.com/parted-command-to-create-resize-rescue-linux-disk-partitions/</a><br /><a href="https://wiki.debian.org/LVM" target="_blank" rel="noreferrer noopener">https://wiki.debian.org/LVM</a></p>
</blockquote>
<p></p>
<p></p>
]]></content:encoded>
					
					<wfw:commentRss>https://marcius.pro/redimensionando-disco-virtual-no-debian-com-particao-lvm-sem-perda-de-dados.html/feed</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>
